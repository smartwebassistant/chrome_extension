<div id="agentConfigDiv">
  <div class="mb-1 border-top h6 pt-1 pb-1">Agent Configuration</div>

  <!-- List of existing agents -->
  <div id="existingAgentsList" class="mb-4">
    <p><strong>Existing Agents</strong></p>
    <ul class="list-group">
      <!-- Agents will be dynamically added here -->
    </ul>
  </div>

  <!-- Template for agent list item (hidden, to be cloned by JS) -->
  <template id="agentListItemTemplate">
    <li
      class="list-group-item d-flex justify-content-between align-items-center"
    >
      <span class="agent-name"></span>
      <div>
        <div class="form-check form-switch d-inline-block me-2">
          <input
            class="form-check-input agent-toggle"
            type="checkbox"
            role="switch"
          />
        </div>
        <button class="btn btn-success btn-sm agent-delete">Delete</button>
      </div>
    </li>
  </template>

  <!-- Form for adding/editing agents -->
  <div id="agentForm">
    <p><strong>Add/Edit Agent</strong></p>
    <div class="mb-3">
      <label for="agentNameInput" class="form-label">Agent Name</label>
      <input
        type="text"
        class="form-control"
        id="agentNameInput"
        placeholder="Enter agent name"
      />
    </div>
    <div class="mb-3">
      <label for="agentDescriptionInput" class="form-label">Description</label>
      <textarea
        class="form-control"
        id="agentDescriptionInput"
        rows="3"
      ></textarea>
    </div>
    <div id="triggersContainer">
      <p><strong>Triggers</strong></p>
      <!-- Triggers will be dynamically added here -->
    </div>
    <button class="btn btn-secondary btn-sm mb-3" id="addTriggerButton">
      Add Trigger
    </button>
    <div id="stepsContainer">
      <p><strong>Steps</strong></p>
      <!-- Steps will be dynamically added here -->
    </div>
    <button class="btn btn-secondary btn-sm mb-3" id="addStepButton">
      Add Step
    </button>
    <div class="border-top pt-1 pb-1 mb-1">
      <button class="btn btn-success btn-sm" id="saveAgentButton">
        Save Agent
      </button>
      <button class="btn btn-secondary btn-sm" id="cancelEditButton">
        Cancel
      </button>
    </div>
  </div>

  <template id="triggerModalTemplate">
    <div class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Add Trigger</h5>
            <button
              type="button"
              class="close btn-sm"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="triggerTypeSelect">Trigger Type</label>
              <select class="form-control" id="triggerTypeSelect">
                <option value="url">URL Pattern</option>
                <option value="element_type">Element Type</option>
                <option value="specific_element">Specific Element</option>
              </select>
            </div>
            <div class="form-group" id="urlPatternGroup" style="display: none">
              <label for="urlPatternInput">URL Pattern</label>
              <input
                type="text"
                class="form-control"
                id="urlPatternInput"
                placeholder="E.g., https://*.example.com/*"
              />
            </div>
            <div class="form-group" id="elementTypeGroup" style="display: none">
              <label for="elementTypeSelect">Element Type</label>
              <select class="form-control" id="elementTypeSelect">
                <option value="RO">Read-Only Element</option>
                <option value="RW">Read-Write Element</option>
              </select>
            </div>
            <div
              class="form-group"
              id="specificElementGroup"
              style="display: none"
            >
              <label for="elementSelectorInput">Element CSS Selector</label>
              <input
                type="text"
                class="form-control"
                id="elementSelectorInput"
                placeholder="E.g., #replyTextArea"
              />
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary btn-sm"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button
              type="button"
              class="btn btn-success btn-sm"
              id="saveTriggerButton"
            >
              Save Trigger
            </button>
          </div>
        </div>
      </div>
    </div>
  </template>
</div>

<!-- Confirmation Modal -->
<div
  class="modal fade"
  id="deleteConfirmationModal"
  tabindex="-1"
  aria-labelledby="deleteConfirmationModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteConfirmationModalLabel">
          Confirm Deletion
        </h5>
        <button
          type="button"
          class="btn-close btn-sm"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">Are you sure you want to delete this agent?</div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary btn-sm"
          data-bs-dismiss="modal"
        >
          Cancel
        </button>
        <button
          type="button"
          class="btn btn-danger btn-sm"
          id="confirmDeleteButton"
        >
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
